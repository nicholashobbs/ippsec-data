 hello I'm Nick polino and this is going to be a guide on explaining the ad server in the sands holiday hack challenge 2016 we already know the answer was Xhosa ads North Pole wonderland calm because we analyzed the apk file or browsing there we get this website look in the source code we do see it as coded in the media JavaScript framework media is a little bit different than most websites because it depends purely on WebSockets and DDP the distributed data protocol and not HTTP GET Sant Post that you may be used to so to demonstrate this fact we're going to be turning we can just look at an HTTP history and click around this website and notice we don't see a lot of gifts and we try to log in and we probably won't see a post and that's all being done in WebSockets so when I click something we do see the WebSockets go click out going incoming cell one of the big benefits to this is it creates real time web application so Brout bring over a window from my host OS I can click the little smiley and right away in my VM we see immediate reaction so just some cool things about media we don't need to do any of that for this actual challenge because it's already been done for us there's a tampermonkey script written by Tim Medine which will help us mind data out of media and you can read the whole blog post if you want some more information but we're just gonna be installing that and running it essentially the first thing you need to do is get tampermonkey and because that's what the script runs on unfortunately the Firefox version that's included with Kali is not compatible with it we're on the extend and service release which runs I think Firefox 45 all right so that's 45 right there but yes 45 so we can get a later version of Firefox I just went to get Firefox comm and downloaded a copy of Firefox we're going to extract it I'm not downloading again just because it took a little while to actually download so right click extract here open up firefox open up this and we're going to close out firefox so you can't run two simultaneously and then we're gonna go to firefox - bin and then just open it and we should have a new version of firefox up and running going over to help about firefox shows wet 50 so now we can install tampermonkey and then we'll install the tampermonkey script that tim Madine wrote and see what happens when we browse to the ad server and this install and it says it's been successfully installed so now I'm gonna Google mining media github maybe and that may pull us to the page no it does not so I'll just mining media sands go to the sands posting and scroll down to where it mentions github that's not it first days github page click on media my no js' click on raw copy everything create new script select all paste and I'm going to put this URL as the update URL and then I'm gonna click Save and we still have media miner saved here and it looks like I already had one copy running so we'll go ahead and turn that one off that's odd but now when going to ads Northport Wonderland comm we have media miner pop up and it tells us things like the Ralph's tells us about in-home quotes we have four columns or records and home quotes have different URLs slash admin / quotes that looks relatively interesting so that's gonna be the URL I go to I guess I can't expand that window slash admin / quotes and we'd see you must be logged in however the home records updated 5-1 on the previous page it was only four so something else is in there and we have to figure out how to view data in this because we can't just click on it and see the actual data we have four records and one record looks like it's hidden so what we're going to do is open up Firefox is developer tools by pushing f12 clicking on console and we want to look at home quotes so I believe we can just do home quotes dot find dot fetch and we will get the results all of that clicking on the last one just add it we do see the audio so we can now highlight this go to ads and paste and that's the challenge so really simple because this script did everything for us if we didn't want to use this script we would have to do router dot routes length I think and we can see there's 11 different routes we can take so let's count this 1 2 3 4 5 6 7 8 9 10 11 so we could do router dot routes let's see 10 this is the last item in it because this starts at 0 the router dot route length starts at 1 so we're looking at the last route and is there a get name there is a get name this and we see admin quotes so that's how it know where to go on the URL and then to do the other stuff it would be like media dot let's see let's pull this posting up again my sins to see exactly what his script is doing and we probably could just look in the tampermonkey script but we can copy from media collection live data collections paste this see what this returns some objects clicking more we have it looks like the collections right here and some other stuff and he just stayed my collection dot flying duck fetch so I wonder if we did media dot home no meteor dot I'm gonna end this video actually because I don't know exactly what I'm doing and I enjoyed how the B game the video went so I hope you guys enjoyed this you should poke around more at exactly what this tampermonkey script did if you want to fully understand it and that'll be it take care bye